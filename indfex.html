<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureBank - Modern Banking</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #0052cc;
            --secondary-teal: #17a2b8;
            --light-blue: #e3f2fd;
            --dark-blue: #003c8f;
            --success-green: #28a745;
            --warning-orange: #fd7e14;
            --danger-red: #dc3545;
            --light-gray: #f8f9fa;
            --dark-gray: #6c757d;
            --white: #ffffff;
            --text-dark: #212529;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light-blue) 0%, #f0f8ff 100%);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-container {
            max-width: 400px;
            margin: 100px auto;
            background: var(--white);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo h1 {
            color: var(--primary-blue);
            font-size: 2.5rem;
            font-weight: 700;
        }

        .logo p {
            color: var(--dark-gray);
            margin-top: 5px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 82, 204, 0.1);
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-teal) 100%);
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 82, 204, 0.3);
        }

        .btn-secondary {
            background: var(--light-gray);
            color: var(--text-dark);
            border: 2px solid #dee2e6;
        }

        .btn-danger {
            background: var(--danger-red);
            color: var(--white);
        }

        .btn-success {
            background: var(--success-green);
            color: var(--white);
        }

        .btn-block {
            width: 100%;
            display: block;
        }

        .navbar {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-blue) 100%);
            padding: 15px 0;
            box-shadow: var(--shadow);
        }

        .navbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .navbar-brand {
            color: var(--white);
            font-size: 1.8rem;
            font-weight: 700;
            text-decoration: none;
        }

        .navbar-nav {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        .navbar-nav a {
            color: var(--white);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            transition: background-color 0.3s ease;
        }

        .navbar-nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 300px;
            height: 100vh;
            background: var(--white);
            box-shadow: var(--shadow);
            transition: left 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-blue) 100%);
            color: var(--white);
            padding: 20px;
            text-align: center;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .sidebar-menu a {
            display: block;
            padding: 15px 25px;
            color: var(--text-dark);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .sidebar-menu a:hover {
            background-color: var(--light-blue);
            border-left-color: var(--primary-blue);
        }

        .sidebar-menu i {
            width: 20px;
            margin-right: 15px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            border-bottom: 1px solid #e9ecef;
            margin-bottom: 20px;
            padding-bottom: 15px;
        }

        .card-title {
            color: var(--primary-blue);
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
        }

        .balance-card {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-teal) 100%);
            color: var(--white);
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .action-tile {
            background: var(--white);
            border: 2px solid var(--light-blue);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--text-dark);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .action-tile:hover {
            border-color: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .action-tile i {
            font-size: 2rem;
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--border-radius);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
        }

        .stat-label {
            color: var(--dark-gray);
            margin-top: 5px;
        }

        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 100;
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
        }

        .mobile-nav-item {
            text-align: center;
            text-decoration: none;
            color: var(--dark-gray);
            font-size: 12px;
            padding: 10px;
            transition: color 0.3s ease;
        }

        .mobile-nav-item:hover {
            color: var(--primary-blue);
        }

        .mobile-nav-item i {
            display: block;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .table th {
            background-color: var(--light-gray);
            font-weight: 600;
            color: var(--text-dark);
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }

        .status-inactive {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger-red);
        }

        .status-pending {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning-orange);
        }

        .alert {
            padding: 15px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-success {
            background-color: rgba(40, 167, 69, 0.1);
            border-left-color: var(--success-green);
            color: var(--success-green);
        }

        .alert-danger {
            background-color: rgba(220, 53, 69, 0.1);
            border-left-color: var(--danger-red);
            color: var(--danger-red);
        }

        .alert-info {
            background-color: rgba(23, 162, 184, 0.1);
            border-left-color: var(--secondary-teal);
            color: var(--secondary-teal);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        @media (max-width: 768px) {
            .navbar-nav {
                display: none;
            }

            .mobile-nav {
                display: block;
            }

            .container {
                padding: 10px;
                margin-bottom: 80px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            color: var(--white);
            font-size: 24px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
        }

        .greeting {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-teal) 100%);
            color: var(--white);
            padding: 30px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            text-align: center;
        }

        .greeting h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .file-upload {
            border: 2px dashed var(--primary-blue);
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            background: var(--light-blue);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload:hover {
            background: var(--light-gray);
        }

        .file-upload input {
            display: none;
        }

        .file-upload i {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }

        .currency-select {
            display: inline-block;
            padding: 8px 12px;
            background: var(--light-blue);
            border: 1px solid var(--primary-blue);
            border-radius: var(--border-radius);
            margin-left: 10px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-gray);
            border-radius: 50%;
            border-top-color: var(--primary-blue);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar" style="display: none;">
        <div class="navbar-content">
            <a href="#" class="navbar-brand">SecureBank</a>
            <button class="hamburger" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="navbar-nav">
                <li><a href="#" onclick="showPage('dashboard')">Dashboard</a></li>
                <li><a href="#" onclick="showPage('profile')">Profile</a></li>
                <li><a href="#" onclick="logout()">Logout</a></li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>SecureBank</h3>
            <p>Welcome back!</p>
        </div>
        <nav class="sidebar-menu">
            <a href="#" onclick="showPage('dashboard')">
                <i class="fas fa-home"></i> Dashboard
            </a>
            <a href="#" onclick="showPage('transactions')">
                <i class="fas fa-exchange-alt"></i> Transactions
            </a>
            <a href="#" onclick="showPage('cards')">
                <i class="fas fa-credit-card"></i> Cards
            </a>
            <a href="#" onclick="showPage('transfer')">
                <i class="fas fa-paper-plane"></i> Transfer
            </a>
            <a href="#" onclick="showPage('international-wire')">
                <i class="fas fa-globe"></i> International Wire
            </a>
            <a href="#" onclick="showPage('deposit')">
                <i class="fas fa-plus-circle"></i> Deposit
            </a>
            <a href="#" onclick="showPage('loan')">
                <i class="fas fa-hand-holding-usd"></i> Loan
            </a>
            <a href="#" onclick="showPage('tax-refund')">
                <i class="fas fa-file-invoice-dollar"></i> IRS Tax Refund
            </a>
            <a href="#" onclick="showPage('loan-history')">
                <i class="fas fa-history"></i> Loan History
            </a>
            <a href="#" onclick="showPage('settings')">
                <i class="fas fa-cog"></i> Settings
            </a>
            <a href="#" onclick="showPage('support')">
                <i class="fas fa-support"></i> Support Ticket
            </a>
            <a href="#" onclick="showPage('profile')">
                <i class="fas fa-user"></i> Profile
            </a>
            <a href="#" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </nav>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="#" class="mobile-nav-item" onclick="showPage('dashboard')">
                <i class="fas fa-home"></i>
                Home
            </a>
            <a href="#" class="mobile-nav-item" onclick="showPage('transactions')">
                <i class="fas fa-chart-bar"></i>
                Stats
            </a>
            <a href="#" class="mobile-nav-item" onclick="showPage('cards')">
                <i class="fas fa-credit-card"></i>
                Cards
            </a>
            <a href="#" class="mobile-nav-item" onclick="showPage('profile')">
                <i class="fas fa-user"></i>
                Profile
            </a>
        </div>
    </div>

    <!-- Login Page -->
    <div class="page active" id="login-page">
        <div class="auth-container">
            <div class="logo">
                <h1><i class="fas fa-university"></i> SecureBank</h1>
                <p>Modern Banking Solutions</p>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email/Username</label>
                    <input type="email" id="login-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" class="form-control" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="showPage('register')" style="color: var(--primary-blue);">Don't have an account? Register</a><br>
                    <a href="#" onclick="showForgotPassword()" style="color: var(--secondary-teal); margin-top: 10px; display: inline-block;">Forgot Password?</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Page -->
    <div class="page" id="register-page">
        <div class="auth-container" style="max-width: 500px;">
            <div class="logo">
                <h1><i class="fas fa-university"></i> SecureBank</h1>
                <p>Create Your Account</p>
            </div>
            <form id="register-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="reg-firstname">First Name</label>
                        <input type="text" id="reg-firstname" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-lastname">Last Name</label>
                        <input type="text" id="reg-lastname" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="reg-email">Email</label>
                    <input type="email" id="reg-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="reg-phone">Phone Number</label>
                    <input type="tel" id="reg-phone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="reg-address">Address</label>
                    <textarea id="reg-address" class="form-control" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="reg-ssn">SSN (Last 4 digits)</label>
                    <input type="text" id="reg-ssn" class="form-control" placeholder="****" maxlength="4" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="reg-password">Password</label>
                        <input type="password" id="reg-password" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reg-confirm-password">Confirm Password</label>
                        <input type="password" id="reg-confirm-password" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="showPage('login')" style="color: var(--primary-blue);">Already have an account? Login</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Account Verification Page -->
    <div class="page" id="verification-page">
        <div class="container">
            <div class="card" style="max-width: 600px; margin: 50px auto;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-shield-alt"></i> Account Verification</h2>
                </div>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    To comply with banking regulations, we need to verify your identity. Please upload the required documents.
                </div>
                <form id="verification-form">
                    <div class="form-group">
                        <label>Government-issued ID (Driver's License, Passport, etc.)</label>
                        <div class="file-upload" onclick="document.getElementById('id-upload').click()">
                            <input type="file" id="id-upload" accept="image/*,.pdf">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Click to upload your ID document</p>
                            <small>Supported formats: JPG, PNG, PDF (Max 10MB)</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Selfie Photo</label>
                        <div class="file-upload" onclick="document.getElementById('selfie-upload').click()">
                            <input type="file" id="selfie-upload" accept="image/*">
                            <i class="fas fa-camera"></i>
                            <p>Click to upload a selfie</p>
                            <small>Clear photo of your face (JPG, PNG only)</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-check"></i> Submit Verification
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div class="page" id="dashboard-page">
        <div class="container">
            <div class="greeting" id="dashboard-greeting">
                <h2 id="greeting-text">Good Morning, User!</h2>
                <p id="current-datetime"></p>
            </div>

            <div class="dashboard-grid">
                <div class="card balance-card">
                    <h3>Available Balance</h3>
                    <div class="balance-amount" id="account-balance">$0.00</div>
                    <p>Account: <span id="account-number-display">************</span></p>
                    <p>Status: <span class="status-badge" id="account-status">Inactive</span></p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">What would you like to do today?</h4>
                    </div>
                    <div class="quick-actions">
                        <div class="action-tile" onclick="showPage('profile')">
                            <i class="fas fa-user-circle"></i>
                            <h5>Account Info</h5>
                        </div>
                        <div class="action-tile" onclick="showPage('transfer')">
                            <i class="fas fa-paper-plane"></i>
                            <h5>Send Money</h5>
                        </div>
                        <div class="action-tile" onclick="showPage('deposit')">
                            <i class="fas fa-plus-circle"></i>
                            <h5>Deposit</h5>
                        </div>
                        <div class="action-tile" onclick="showPage('transactions')">
                            <i class="fas fa-list"></i>
                            <h5>Transactions</h5>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">Account Statistics</h4>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value">$500,000</div>
                        <div class="stat-label">Transaction Limit</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="pending-transactions">$0</div>
                        <div class="stat-label">Pending Transactions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="transaction-volume">$0</div>
                        <div class="stat-label">Transaction Volume</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="account-age">0 days</div>
                        <div class="stat-label">Account Age</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div class="page" id="profile-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-user"></i> Profile Information</h2>
                </div>
                <div class="dashboard-grid">
                    <div>
                        <h4>Personal Details</h4>
                        <table class="table">
                            <tr>
                                <td><strong>Full Name:</strong></td>
                                <td id="profile-name">John Doe</td>
                            </tr>
                            <tr>
                                <td><strong>Account Number:</strong></td>
                                <td id="profile-account">1234567890</td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td id="profile-email">john@example.com</td>
                            </tr>
                            <tr>
                                <td><strong>Phone:</strong></td>
                                <td id="profile-phone">+1 (555) 123-4567</td>
                            </tr>
                            <tr>
                                <td><strong>Address:</strong></td>
                                <td id="profile-address">123 Main St, City, State</td>
                            </tr>
                            <tr>
                                <td><strong>Verification Status:</strong></td>
                                <td><span class="status-badge" id="profile-verification">Pending</span></td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>Security Settings</h4>
                        <form id="password-change-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <input type="password" id="current-password" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <input type="password" id="new-password" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password">Confirm New Password</label>
                                <input type="password" id="confirm-new-password" class="form-control" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                        </form>

                        <hr style="margin: 30px 0;">

                        <form id="pin-change-form">
                            <div class="form-group">
                                <label for="transaction-pin">Set Transaction PIN (4-6 digits)</label>
                                <input type="password" id="transaction-pin" class="form-control" pattern="[0-9]{4,6}" maxlength="6" required>
                            </div>
                            <button type="submit" class="btn btn-secondary">
                                <i class="fas fa-shield-alt"></i> Set PIN
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Deposit Page -->
    <div class="page" id="deposit-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-plus-circle"></i> Deposit Funds</h2>
                </div>
                <form id="deposit-form">
                    <div class="form-group">
                        <label for="deposit-method">Deposit Method</label>
                        <select id="deposit-method" class="form-control" onchange="updateDepositMethod()" required>
                            <option value="">Select Method</option>
                            <option value="bitcoin">Bitcoin</option>
                            <option value="bank-transfer">Bank Transfer</option>
                            <option value="credit-card">Credit Card</option>
                        </select>
                    </div>

                    <div id="bitcoin-details" class="hidden">
                        <div class="alert alert-info">
                            <i class="fas fa-bitcoin"></i>
                            Send Bitcoin to the address below. Funds will be converted to USD at current market rate.
                        </div>
                        <div class="form-group">
                            <label>Bitcoin Wallet Address</label>
                            <div style="background: var(--light-gray); padding: 15px; border-radius: var(--border-radius); word-break: break-all;">
                                <code id="bitcoin-address">1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa</code>
                                <button type="button" class="btn btn-secondary" onclick="copyToClipboard('bitcoin-address')" style="margin-left: 10px;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="bank-details" class="hidden">
                        <div class="form-group">
                            <label for="routing-number">Bank Routing Number</label>
                            <input type="text" id="routing-number" class="form-control" pattern="[0-9]{9}">
                        </div>
                        <div class="form-group">
                            <label for="account-number-transfer">Account Number</label>
                            <input type="text" id="account-number-transfer" class="form-control">
                        </div>
                    </div>

                    <div id="card-details" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="card-number">Card Number</label>
                                <input type="text" id="card-number" class="form-control" placeholder="1234 5678 9012 3456">
                            </div>
                            <div class="form-group">
                                <label for="card-cvv">CVV</label>
                                <input type="text" id="card-cvv" class="form-control" placeholder="123" maxlength="4">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="card-expiry">Expiry Date</label>
                                <input type="text" id="card-expiry" class="form-control" placeholder="MM/YY">
                            </div>
                            <div class="form-group">
                                <label for="card-name">Cardholder Name</label>
                                <input type="text" id="card-name" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="deposit-amount">Amount to Deposit</label>
                        <div style="position: relative;">
                            <input type="number" id="deposit-amount" class="form-control" min="1" step="0.01" required style="padding-left: 30px;">
                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="deposit-note">Note (Optional)</label>
                        <input type="text" id="deposit-note" class="form-control" placeholder="Deposit description">
                    </div>

                    <button type="submit" class="btn btn-success btn-block">
                        <i class="fas fa-check"></i> Confirm Deposit
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Cards Page -->
    <div class="page" id="cards-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-credit-card"></i> My Cards</h2>
                    <button class="btn btn-primary" onclick="showModal('card-application-modal')">
                        <i class="fas fa-plus"></i> Apply for Card
                    </button>
                </div>
                <div id="cards-list">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        You don't have any cards yet. Apply for your first card to get started!
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transactions Page -->
    <div class="page" id="transactions-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-exchange-alt"></i> Transaction History</h2>
                    <div>
                        <select id="transaction-filter" class="form-control" style="display: inline-block; width: auto; margin-right: 10px;">
                            <option value="all">All Transactions</option>
                            <option value="deposit">Deposits</option>
                            <option value="withdrawal">Withdrawals</option>
                            <option value="transfer">Transfers</option>
                        </select>
                        <input type="date" id="transaction-date-filter" class="form-control" style="display: inline-block; width: auto;">
                    </div>
                </div>
                <div id="transactions-list">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        No transactions yet. Your transaction history will appear here.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transfer Page -->
    <div class="page" id="transfer-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-paper-plane"></i> Send Money</h2>
                </div>
                <form id="transfer-form">
                    <div class="form-group">
                        <label for="recipient-account">Recipient Account Number</label>
                        <input type="text" id="recipient-account" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="recipient-name">Recipient Name</label>
                        <input type="text" id="recipient-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="transfer-amount">Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="transfer-amount" class="form-control" min="1" step="0.01" required style="padding-left: 30px;">
                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="transfer-note">Note</label>
                        <input type="text" id="transfer-note" class="form-control" placeholder="Payment description">
                    </div>
                    <div class="form-group">
                        <label for="transfer-pin">Transaction PIN</label>
                        <input type="password" id="transfer-pin" class="form-control" maxlength="6" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i> Send Money
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- International Wire Page -->
    <div class="page" id="international-wire-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-globe"></i> International Wire Transfer</h2>
                </div>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    International wire transfers may take 1-5 business days and include additional fees.
                </div>
                <form id="wire-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wire-recipient-name">Recipient Name</label>
                            <input type="text" id="wire-recipient-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="wire-recipient-address">Recipient Address</label>
                            <input type="text" id="wire-recipient-address" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wire-bank-name">Bank Name</label>
                            <input type="text" id="wire-bank-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="wire-swift-code">SWIFT Code</label>
                            <input type="text" id="wire-swift-code" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wire-account-number">Recipient Account Number</label>
                            <input type="text" id="wire-account-number" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="wire-currency">Currency</label>
                            <select id="wire-currency" class="form-control" required>
                                <option value="USD">USD - US Dollar</option>
                                <option value="EUR">EUR - Euro</option>
                                <option value="GBP">GBP - British Pound</option>
                                <option value="JPY">JPY - Japanese Yen</option>
                                <option value="CAD">CAD - Canadian Dollar</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="wire-amount">Amount</label>
                        <div style="position: relative;">
                            <input type="number" id="wire-amount" class="form-control" min="1" step="0.01" required style="padding-left: 30px;">
                            <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                        </div>
                        <small class="form-text text-muted">Wire fee: $25.00 (will be deducted from your account)</small>
                    </div>
                    <div class="form-group">
                        <label for="wire-purpose">Purpose of Transfer</label>
                        <select id="wire-purpose" class="form-control" required>
                            <option value="">Select Purpose</option>
                            <option value="personal">Personal Transfer</option>
                            <option value="business">Business Payment</option>
                            <option value="education">Education Expenses</option>
                            <option value="medical">Medical Expenses</option>
                            <option value="investment">Investment</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="wire-note">Additional Information</label>
                        <textarea id="wire-note" class="form-control" rows="3" placeholder="Additional details for the recipient"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-globe"></i> Send Wire Transfer
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Loan Page -->
    <div class="page" id="loan-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-hand-holding-usd"></i> Loan Application</h2>
                </div>
                <form id="loan-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="loan-amount">Loan Amount</label>
                            <div style="position: relative;">
                                <input type="number" id="loan-amount" class="form-control" min="1000" max="100000" required style="padding-left: 30px;">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="loan-term">Loan Term</label>
                            <select id="loan-term" class="form-control" required>
                                <option value="">Select Term</option>
                                <option value="12">12 months</option>
                                <option value="24">24 months</option>
                                <option value="36">36 months</option>
                                <option value="48">48 months</option>
                                <option value="60">60 months</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="loan-purpose">Purpose of Loan</label>
                        <select id="loan-purpose" class="form-control" required>
                            <option value="">Select Purpose</option>
                            <option value="home">Home Purchase</option>
                            <option value="auto">Auto Loan</option>
                            <option value="education">Education</option>
                            <option value="business">Business</option>
                            <option value="personal">Personal</option>
                            <option value="debt-consolidation">Debt Consolidation</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="employment-status">Employment Status</label>
                            <select id="employment-status" class="form-control" required>
                                <option value="">Select Status</option>
                                <option value="employed">Employed</option>
                                <option value="self-employed">Self-Employed</option>
                                <option value="student">Student</option>
                                <option value="retired">Retired</option>
                                <option value="unemployed">Unemployed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="annual-income">Annual Income</label>
                            <div style="position: relative;">
                                <input type="number" id="annual-income" class="form-control" min="0" required style="padding-left: 30px;">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="employer-name">Employer Name</label>
                        <input type="text" id="employer-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Income Proof Document</label>
                        <div class="file-upload" onclick="document.getElementById('income-proof').click()">
                            <input type="file" id="income-proof" accept=".pdf,.jpg,.png" required>
                            <i class="fas fa-file-upload"></i>
                            <p>Upload pay stub, tax return, or bank statement</p>
                            <small>PDF, JPG, PNG (Max 10MB)</small>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success btn-block">
                        <i class="fas fa-paper-plane"></i> Submit Loan Application
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Tax Refund Page -->
    <div class="page" id="tax-refund-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-file-invoice-dollar"></i> IRS Tax Refund</h2>
                </div>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    File for your tax refund directly through SecureBank. Processing typically takes 21-28 days.
                </div>
                <form id="tax-refund-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tax-year">Tax Year</label>
                            <select id="tax-year" class="form-control" required>
                                <option value="">Select Year</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="refund-amount">Expected Refund Amount</label>
                            <div style="position: relative;">
                                <input type="number" id="refund-amount" class="form-control" min="1" step="0.01" required style="padding-left: 30px;">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--dark-gray);">$</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="filing-status">Filing Status</label>
                            <select id="filing-status" class="form-control" required>
                                <option value="">Select Status</option>
                                <option value="single">Single</option>
                                <option value="married-joint">Married Filing Jointly</option>
                                <option value="married-separate">Married Filing Separately</option>
                                <option value="head-household">Head of Household</option>
                                <option value="widow">Qualifying Widow(er)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dependents">Number of Dependents</label>
                            <input type="number" id="dependents" class="form-control" min="0" value="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Tax Documents (W-2, 1099, etc.)</label>
                        <div class="file-upload" onclick="document.getElementById('tax-documents').click()">
                            <input type="file" id="tax-documents" accept=".pdf,.jpg,.png" multiple required>
                            <i class="fas fa-file-upload"></i>
                            <p>Upload your tax documents</p>
                            <small>W-2, 1099, receipts (PDF, JPG, PNG)</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="routing-number-tax">Bank Routing Number</label>
                        <input type="text" id="routing-number-tax" class="form-control" pattern="[0-9]{9}" required>
                        <small class="form-text text-muted">9-digit routing number for direct deposit</small>
                    </div>
                    <button type="submit" class="btn btn-success btn-block">
                        <i class="fas fa-paper-plane"></i> Submit Tax Refund Claim
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Loan History Page -->
    <div class="page" id="loan-history-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-history"></i> Loan History</h2>
                </div>
                <div id="loan-history-list">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        No loan applications found. Apply for a loan to see your history here.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Page -->
    <div class="page" id="settings-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-cog"></i> Settings</h2>
                </div>
                <div class="dashboard-grid">
                    <div>
                        <h4>Notifications</h4>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="email-notifications" checked> Email Notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="sms-notifications" checked> SMS Notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="push-notifications" checked> Push Notifications
                            </label>
                        </div>
                    </div>
                    <div>
                        <h4>Security</h4>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="two-factor-auth"> Enable Two-Factor Authentication
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="session-timeout">Session Timeout</label>
                            <select id="session-timeout" class="form-control">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div>
                        <h4>Preferences</h4>
                        <div class="form-group">
                            <label for="theme-select">Theme</label>
                            <select id="theme-select" class="form-control">
                                <option value="light" selected>Light</option>
                                <option value="dark">Dark</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="language-select">Language</label>
                            <select id="language-select" class="form-control">
                                <option value="en" selected>English</option>
                                <option value="es">Español</option>
                                <option value="fr">Français</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <h4>Account</h4>
                        <p>FDIC Insured up to $250,000</p>
                        <p>Member FDIC</p>
                        <button class="btn btn-danger" onclick="confirmAccountClosure()">
                            <i class="fas fa-times-circle"></i> Close Account
                        </button>
                    </div>
                </div>
                <div style="margin-top: 30px;">
                    <button class="btn btn-success" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div class="page" id="support-page">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-support"></i> Support Ticket</h2>
                </div>
                <form id="support-form">
                    <div class="form-group">
                        <label for="ticket-category">Category</label>
                        <select id="ticket-category" class="form-control" required>
                            <option value="">Select Category</option>
                            <option value="account">Account Issues</option>
                            <option value="transactions">Transaction Problems</option>
                            <option value="cards">Card Issues</option>
                            <option value="loans">Loan Questions</option>
                            <option value="technical">Technical Support</option>
                            <option value="general">General Inquiry</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ticket-priority">Priority</label>
                        <select id="ticket-priority" class="form-control" required>
                            <option value="">Select Priority</option>
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ticket-subject">Subject</label>
                        <input type="text" id="ticket-subject" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="ticket-description">Description</label>
                        <textarea id="ticket-description" class="form-control" rows="5" required placeholder="Please describe your issue in detail..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Attachments (Optional)</label>
                        <div class="file-upload" onclick="document.getElementById('ticket-attachments').click()">
                            <input type="file" id="ticket-attachments" accept="image/*,.pdf,.doc,.docx" multiple>
                            <i class="fas fa-paperclip"></i>
                            <p>Attach screenshots or documents</p>
                            <small>Images, PDF, DOC (Max 5MB each)</small>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i> Submit Ticket
                    </button>
                </form>
                
                <hr style="margin: 40px 0;">
                
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Contact Information</h4>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value"><i class="fas fa-phone"></i></div>
                            <div class="stat-label">1-800-SECURE-1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value"><i class="fas fa-envelope"></i></div>
                            <div class="stat-label">support@securebank.com</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value"><i class="fas fa-clock"></i></div>
                            <div class="stat-label">24/7 Support</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value"><i class="fas fa-comments"></i></div>
                            <div class="stat-label">Live Chat Available</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Card Application Modal -->
    <div class="modal" id="card-application-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-credit-card"></i> Apply for Card</h3>
                <button class="modal-close" onclick="closeModal('card-application-modal')">&times;</button>
            </div>
            <form id="card-application-form">
                <div class="form-group">
                    <label for="card-type">Card Type</label>
                    <select id="card-type" class="form-control" required>
                        <option value="">Select Card Type</option>
                        <option value="debit">Debit Card</option>
                        <option value="credit">Credit Card</option>
                        <option value="virtual">Virtual Card</option>
                    </select>
                </div>
                <div class="form-group" id="shipping-address-group">
                    <label for="shipping-address">Shipping Address</label>
                    <textarea id="shipping-address" class="form-control" rows="3" placeholder="Enter shipping address for physical card"></textarea>
                </div>
                <div class="form-group">
                    <label for="card-design">Card Design</label>
                    <select id="card-design" class="form-control">
                        <option value="classic">Classic Blue</option>
                        <option value="premium">Premium Black</option>
                        <option value="eco">Eco Green</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-paper-plane"></i> Submit Application
                </button>
            </form>
        </div>
    </div>

    <!-- 2FA Modal -->
    <div class="modal" id="twofa-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shield-alt"></i> Two-Factor Authentication</h3>
            </div>
            <p>Enter the 6-digit code sent to your phone:</p>
            <form id="twofa-form">
                <div class="form-group">
                    <input type="text" id="twofa-code" class="form-control" maxlength="6" placeholder="123456" style="text-align: center; font-size: 24px; letter-spacing: 10px;" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">
                    <i class="fas fa-check"></i> Verify Code
                </button>
            </form>
            <p style="text-align: center; margin-top: 15px;">
                <a href="#" onclick="resend2FA()">Didn't receive code? Resend</a>
            </p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // App State
        let currentUser = null;
        let currentPage = 'login';
        let transactions = [];
        let cards = [];
        let loans = [];

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            const savedUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (savedUser) {
                currentUser = savedUser;
                loadDashboard();
            }

            // Set up form handlers
            setupFormHandlers();
            updateDateTime();
            setInterval(updateDateTime, 60000); // Update every minute
        });

        // Form Handlers
        function setupFormHandlers() {
            // Login Form
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });

            // Register Form
            document.getElementById('register-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleRegister();
            });

            // Verification Form
            document.getElementById('verification-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleVerification();
            });

            // Deposit Form
            document.getElementById('deposit-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleDeposit();
            });

            // Transfer Form
            document.getElementById('transfer-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleTransfer();
            });

            // Wire Form
            document.getElementById('wire-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleWireTransfer();
            });

            // Loan Form
            document.getElementById('loan-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLoanApplication();
            });

            // Tax Refund Form
            document.getElementById('tax-refund-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleTaxRefund();
            });

            // Card Application Form
            document.getElementById('card-application-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleCardApplication();
            });

            // Support Form
            document.getElementById('support-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleSupportTicket();
            });

            // Password Change Form
            document.getElementById('password-change-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handlePasswordChange();
            });

            // PIN Change Form
            document.getElementById('pin-change-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handlePinChange();
            });

            // 2FA Form
            document.getElementById('twofa-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handle2FA();
            });
        }

        // Authentication Functions
        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // Simulate login validation
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // Check if 2FA is enabled
                if (user.twoFactorEnabled) {
                    show2FAModal();
                } else {
                    loadDashboard();
                }
            } else {
                showAlert('Invalid email or password', 'danger');
            }
        }

        function handleRegister() {
            const firstName = document.getElementById('reg-firstname').value;
            const lastName = document.getElementById('reg-lastname').value;
            const email = document.getElementById('reg-email').value;
            const phone = document.getElementById('reg-phone').value;
            const address = document.getElementById('reg-address').value;
            const ssn = document.getElementById('reg-ssn').value;
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirm-password').value;

            if (password !== confirmPassword) {
                showAlert('Passwords do not match', 'danger');
                return;
            }

            // Generate unique account number
            const accountNumber = generateAccountNumber();
            
            const newUser = {
                id: Date.now(),
                firstName,
                lastName,
                email,
                phone,
                address,
                ssn,
                password,
                accountNumber,
                balance: 0,
                status: 'Inactive',
                verified: false,
                createdAt: new Date().toISOString(),
                transactionPin: null,
                twoFactorEnabled: false
            };

            // Save user
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            showAlert(`Account created successfully! Your account number is: ${accountNumber}`, 'success');
            
            // Auto-login and redirect to verification
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            showPage('verification');
        }

        function handleVerification() {
            if (!currentUser) return;

            // Simulate verification process
            setTimeout(() => {
                currentUser.verified = true;
                currentUser.status = 'Active';
                
                // Update user in storage
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                }

                showAlert('Account verified successfully!', 'success');
                loadDashboard();
            }, 2000);

            showAlert('Verification in progress...', 'info');
        }

        function show2FAModal() {
            document.getElementById('twofa-modal').classList.add('active');
        }

        function handle2FA() {
            const code = document.getElementById('twofa-code').value;
            
            // Simulate 2FA verification
            if (code === '123456' || code.length === 6) {
                closeModal('twofa-modal');
                loadDashboard();
            } else {
                showAlert('Invalid verification code', 'danger');
            }
        }

        function resend2FA() {
            showAlert('Verification code sent to your phone', 'info');
        }

        // Dashboard Functions
        function loadDashboard() {
            if (!currentUser) return;

            document.getElementById('navbar').style.display = 'block';
            showPage('dashboard');
            updateDashboard();
        }

        function updateDashboard() {
            if (!currentUser) return;

            // Update greeting
            const now = new Date();
            const hour = now.getHours();
            let greeting = 'Good Evening';
            if (hour < 12) greeting = 'Good Morning';
            else if (hour < 18) greeting = 'Good Afternoon';
            
            document.getElementById('greeting-text').textContent = 
                `${greeting}, ${currentUser.firstName}!`;

            // Update account info
            document.getElementById('account-balance').textContent = 
                `${currentUser.balance.toLocaleString('en-US', {minimumFractionDigits: 2})}`;
            
            document.getElementById('account-number-display').textContent = 
                currentUser.accountNumber;
            
            const statusElement = document.getElementById('account-status');
            statusElement.textContent = currentUser.status;
            statusElement.className = `status-badge ${currentUser.status === 'Active' ? 'status-active' : 'status-inactive'}`;

            // Update profile
            document.getElementById('profile-name').textContent = 
                `${currentUser.firstName} ${currentUser.lastName}`;
            document.getElementById('profile-account').textContent = currentUser.accountNumber;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-phone').textContent = currentUser.phone;
            document.getElementById('profile-address').textContent = currentUser.address;
            
            const verificationElement = document.getElementById('profile-verification');
            verificationElement.textContent = currentUser.verified ? 'Verified' : 'Pending';
            verificationElement.className = `status-badge ${currentUser.verified ? 'status-active' : 'status-pending'}`;

            // Calculate account age
            const accountAge = Math.floor((new Date() - new Date(currentUser.createdAt)) / (1000 * 60 * 60 * 24));
            document.getElementById('account-age').textContent = `${accountAge} days`;

            // Load user-specific data
            loadTransactions();
            loadCards();
            loadLoans();
        }

        function updateDateTime() {
            const now = new Date();
            document.getElementById('current-datetime').textContent = 
                now.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
        }

        // Transaction Functions
        function handleDeposit() {
            const method = document.getElementById('deposit-method').value;
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            const note = document.getElementById('deposit-note').value;

            if (!currentUser || !method || !amount || amount <= 0) {
                showAlert('Please fill in all required fields', 'danger');
                return;
            }

            // Add transaction
            const transaction = {
                id: Date.now(),
                type: 'deposit',
                amount: amount,
                method: method,
                note: note,
                date: new Date().toISOString(),
                status: 'completed'
            };

            transactions.push(transaction);
            currentUser.balance += amount;

            // Update user in storage
            updateUserInStorage();

            showAlert(`${amount.toFixed(2)} deposited successfully via ${method}`, 'success');
            document.getElementById('deposit-form').reset();
            updateDashboard();
        }

        function handleTransfer() {
            const recipientAccount = document.getElementById('recipient-account').value;
            const recipientName = document.getElementById('recipient-name').value;
            const amount = parseFloat(document.getElementById('transfer-amount').value);
            const note = document.getElementById('transfer-note').value;
            const pin = document.getElementById('transfer-pin').value;

            if (!currentUser.transactionPin) {
                showAlert('Please set up a transaction PIN in your profile first', 'danger');
                return;
            }

            if (pin !== currentUser.transactionPin) {
                showAlert('Invalid transaction PIN', 'danger');
                return;
            }

            if (amount > currentUser.balance) {
                showAlert('Insufficient funds', 'danger');
                return;
            }

            // Process transfer
            const transaction = {
                id: Date.now(),
                type: 'transfer',
                amount: -amount,
                recipient: recipientName,
                recipientAccount: recipientAccount,
                note: note,
                date: new Date().toISOString(),
                status: 'completed'
            };

            transactions.push(transaction);
            currentUser.balance -= amount;

            updateUserInStorage();
            showAlert(`${amount.toFixed(2)} sent to ${recipientName}`, 'success');
            document.getElementById('transfer-form').reset();
            updateDashboard();
        }

        function handleWireTransfer() {
            const amount = parseFloat(document.getElementById('wire-amount').value);
            const fee = 25.00;
            const totalAmount = amount + fee;

            if (totalAmount > currentUser.balance) {
                showAlert(`Insufficient funds. Total amount including fee: ${totalAmount.toFixed(2)}`, 'danger');
                return;
            }

            const transaction = {
                id: Date.now(),
                type: 'wire-transfer',
                amount: -totalAmount,
                wireAmount: amount,
                fee: fee,
                recipient: document.getElementById('wire-recipient-name').value,
                currency: document.getElementById('wire-currency').value,
                date: new Date().toISOString(),
                status: 'processing'
            };

            transactions.push(transaction);
            currentUser.balance -= totalAmount;

            updateUserInStorage();
            showAlert(`Wire transfer of ${amount.toFixed(2)} initiated (Fee: ${fee.toFixed(2)})`, 'success');
            document.getElementById('wire-form').reset();
            updateDashboard();
        }

        // Loan Functions
        function handleLoanApplication() {
            const loanAmount = parseFloat(document.getElementById('loan-amount').value);
            const loanTerm = document.getElementById('loan-term').value;
            const loanPurpose = document.getElementById('loan-purpose').value;

            const loan = {
                id: Date.now(),
                amount: loanAmount,
                term: parseInt(loanTerm),
                purpose: loanPurpose,
                status: 'Under Review',
                applicationDate: new Date().toISOString(),
                monthlyPayment: calculateLoanPayment(loanAmount, parseInt(loanTerm))
            };

            loans.push(loan);
            saveUserData();

            showAlert('Loan application submitted successfully! You will receive a decision within 2-3 business days.', 'success');
            document.getElementById('loan-form').reset();
            loadLoans();
        }

        function calculateLoanPayment(amount, term) {
            const rate = 0.05 / 12; // 5% annual rate
            return (amount * rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
        }

        function handleTaxRefund() {
            showAlert('Tax refund claim submitted successfully! Processing time: 21-28 days.', 'success');
            document.getElementById('tax-refund-form').reset();
        }

        // Card Functions
        function handleCardApplication() {
            const cardType = document.getElementById('card-type').value;
            
            const card = {
                id: Date.now(),
                type: cardType,
                number: generateCardNumber(),
                expiryDate: generateExpiryDate(),
                cvv: generateCVV(),
                status: 'Active',
                applicationDate: new Date().toISOString()
            };

            cards.push(card);
            saveUserData();

            showAlert(`${cardType} card application approved!`, 'success');
            closeModal('card-application-modal');
            loadCards();
        }

        // Support Functions
        function handleSupportTicket() {
            const ticketNumber = 'TK' + Date.now().toString().slice(-6);
            showAlert(`Support ticket #${ticketNumber} created successfully. We'll respond within 24 hours.`, 'success');
            document.getElementById('support-form').reset();
        }

        // Security Functions
        function handlePasswordChange() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmNewPassword = document.getElementById('confirm-new-password').value;

            if (currentPassword !== currentUser.password) {
                showAlert('Current password is incorrect', 'danger');
                return;
            }

            if (newPassword !== confirmNewPassword) {
                showAlert('New passwords do not match', 'danger');
                return;
            }

            currentUser.password = newPassword;
            updateUserInStorage();

            showAlert('Password changed successfully', 'success');
            document.getElementById('password-change-form').reset();
        }

        function handlePinChange() {
            const pin = document.getElementById('transaction-pin').value;
            
            if (pin.length < 4 || pin.length > 6) {
                showAlert('PIN must be 4-6 digits', 'danger');
                return;
            }

            currentUser.transactionPin = pin;
            updateUserInStorage();

            showAlert('Transaction PIN set successfully', 'success');
            document.getElementById('pin-change-form').reset();
        }

        // Utility Functions
        function generateAccountNumber() {
            return Math.floor(1000000000 + Math.random() * 9000000000).toString();
        }

        function generateCardNumber() {
            return '4' + Array.from({length: 15}, () => Math.floor(Math.random() * 10)).join('');
        }

        function generateExpiryDate() {
            const date = new Date();
            date.setFullYear(date.getFullYear() + 4);
            return (date.getMonth() + 1).toString().padStart(2, '0') + '/' + date.getFullYear().toString().slice(-2);
        }

        function generateCVV() {
            return Math.floor(100 + Math.random() * 900).toString();
        }

        function updateUserInStorage() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        function saveUserData() {
            localStorage.setItem(`transactions_${currentUser.id}`, JSON.stringify(transactions));
            localStorage.setItem(`cards_${currentUser.id}`, JSON.stringify(cards));
            localStorage.setItem(`loans_${currentUser.id}`, JSON.stringify(loans));
        }

        function loadTransactions() {
            if (!currentUser) return;
            transactions = JSON.parse(localStorage.getItem(`transactions_${currentUser.id}`) || '[]');
            displayTransactions();
        }

        function loadCards() {
            if (!currentUser) return;
            cards = JSON.parse(localStorage.getItem(`cards_${currentUser.id}`) || '[]');
            displayCards();
        }

        function loadLoans() {
            if (!currentUser) return;
            loans = JSON.parse(localStorage.getItem(`loans_${currentUser.id}`) || '[]');
            displayLoans();
        }

        function displayTransactions() {
            const container = document.getElementById('transactions-list');
            if (transactions.length === 0) {
                container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle"></i> No transactions yet. Your transaction history will appear here.</div>';
                return;
            }

            const html = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${transactions.map(t => `
                            <tr>
                                <td>${new Date(t.date).toLocaleDateString()}</td>
                                <td>${t.type.charAt(0).toUpperCase() + t.type.slice(1)}</td>
                                <td>${t.note || t.recipient || 'N/A'}</td>
                                <td class="${t.amount >= 0 ? 'text-success' : 'text-danger'}">
                                    ${t.amount >= 0 ? '+' : ''}${Math.abs(t.amount).toFixed(2)}
                                </td>
                                <td><span class="status-badge status-${t.status === 'completed' ? 'active' : 'pending'}">${t.status}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        function displayCards() {
            const container = document.getElementById('cards-list');
            if (cards.length === 0) {
                container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle"></i> You don\'t have any cards yet. Apply for your first card to get started!</div>';
                return;
            }

            const html = cards.map(card => `
                <div class="card" style="margin-bottom: 20px;">
                    <div style="background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-teal) 100%); color: white; padding: 20px; border-radius: var(--border-radius);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <h4>${card.type.charAt(0).toUpperCase() + card.type.slice(1)} Card</h4>
                                <p style="font-size: 1.2rem; margin: 10px 0;">**** **** **** ${card.number.slice(-4)}</p>
                                <p>Expires: ${card.expiryDate}</p>
                            </div>
                            <div style="text-align: right;">
                                <span class="status-badge status-active">${card.status}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            container.innerHTML = html;
        }

        function displayLoans() {
            const container = document.getElementById('loan-history-list');
            if (loans.length === 0) {
                container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle"></i> No loan applications found. Apply for a loan to see your history here.</div>';
                return;
            }

            const html = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>Application Date</th>
                            <th>Amount</th>
                            <th>Term</th>
                            <th>Monthly Payment</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${loans.map(loan => `
                            <tr>
                                <td>${new Date(loan.applicationDate).toLocaleDateString()}</td>
                                <td>${loan.amount.toLocaleString()}</td>
                                <td>${loan.term} months</td>
                                <td>${loan.monthlyPayment.toFixed(2)}</td>
                                <td><span class="status-badge status-pending">${loan.status}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        // Navigation Functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show selected page
            document.getElementById(pageId + '-page').classList.add('active');
            currentPage = pageId;

            // Close sidebar on mobile
            closeSidebar();

            // Update page-specific content
            if (pageId === 'dashboard' && currentUser) {
                updateDashboard();
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            document.getElementById('navbar').style.display = 'none';
            showPage('login');
            showAlert('Logged out successfully', 'info');
        }

        // Utility Functions
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'danger' ? 'times' : 'info'}-circle"></i> ${message}`;
            
            // Insert at the top of the current page
            const currentPageElement = document.querySelector('.page.active .container');
            if (currentPageElement) {
                currentPageElement.insertBefore(alertDiv, currentPageElement.firstChild);
                
                // Remove alert after 5 seconds
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.parentNode.removeChild(alertDiv);
                    }
                }, 5000);
            }
        }

        function updateDepositMethod() {
            const method = document.getElementById('deposit-method').value;
            
            // Hide all method-specific fields
            document.getElementById('bitcoin-details').classList.add('hidden');
            document.getElementById('bank-details').classList.add('hidden');
            document.getElementById('card-details').classList.add('hidden');
            
            // Show relevant fields
            if (method === 'bitcoin') {
                document.getElementById('bitcoin-details').classList.remove('hidden');
                // Generate new Bitcoin address
                document.getElementById('bitcoin-address').textContent = generateBitcoinAddress();
            } else if (method === 'bank-transfer') {
                document.getElementById('bank-details').classList.remove('hidden');
            } else if (method === 'credit-card') {
                document.getElementById('card-details').classList.remove('hidden');
            }
        }

        function generateBitcoinAddress() {
            // Generate a realistic-looking Bitcoin address
            const chars = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
            let result = '1';
            for (let i = 0; i < 33; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showAlert('Copied to clipboard!', 'success');
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showAlert('Copied to clipboard!', 'success');
            }
        }

        function showForgotPassword() {
            showAlert('Password reset link sent to your email address', 'info');
        }

        function confirmAccountClosure() {
            if (confirm('Are you sure you want to close your account? This action cannot be undone.')) {
                showAlert('Account closure request submitted. Our team will contact you within 24 hours.', 'info');
            }
        }

        function saveSettings() {
            showAlert('Settings saved successfully', 'success');
        }

        // Card type change handler
        document.addEventListener('change', function(e) {
            if (e.target.id === 'card-type') {
                const cardType = e.target.value;
                const shippingGroup = document.getElementById('shipping-address-group');
                
                if (cardType === 'virtual') {
                    shippingGroup.style.display = 'none';
                    document.getElementById('shipping-address').required = false;
                } else {
                    shippingGroup.style.display = 'block';
                    document.getElementById('shipping-address').required = true;
                }
            }
        });

        // Auto-format card inputs
        document.addEventListener('input', function(e) {
            if (e.target.id === 'card-number') {
                let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                if (formattedValue !== e.target.value) {
                    e.target.value = formattedValue;
                }
            }
            
            if (e.target.id === 'card-expiry') {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
            }
        });

        // Filter transactions
        document.addEventListener('change', function(e) {
            if (e.target.id === 'transaction-filter' || e.target.id === 'transaction-date-filter') {
                filterTransactions();
            }
        });

        function filterTransactions() {
            const typeFilter = document.getElementById('transaction-filter').value;
            const dateFilter = document.getElementById('transaction-date-filter').value;
            
            let filteredTransactions = [...transactions];
            
            if (typeFilter !== 'all') {
                filteredTransactions = filteredTransactions.filter(t => t.type === typeFilter);
            }
            
            if (dateFilter) {
                const filterDate = new Date(dateFilter);
                filteredTransactions = filteredTransactions.filter(t => {
                    const transactionDate = new Date(t.date);
                    return transactionDate.toDateString() === filterDate.toDateString();
                });
            }
            
            displayFilteredTransactions(filteredTransactions);
        }

        function displayFilteredTransactions(filteredTransactions) {
            const container = document.getElementById('transactions-list');
            if (filteredTransactions.length === 0) {
                container.innerHTML = '<div class="alert alert-info"><i class="fas fa-info-circle"></i> No transactions match the selected filters.</div>';
                return;
            }

            const html = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${filteredTransactions.map(t => `
                            <tr>
                                <td>${new Date(t.date).toLocaleDateString()}</td>
                                <td>${t.type.charAt(0).toUpperCase() + t.type.slice(1)}</td>
                                <td>${t.note || t.recipient || 'N/A'}</td>
                                <td class="${t.amount >= 0 ? 'text-success' : 'text-danger'}">
                                    ${t.amount >= 0 ? '+' : ''}${Math.abs(t.amount).toFixed(2)}
                                </td>
                                <td><span class="status-badge status-${t.status === 'completed' ? 'active' : 'pending'}">${t.status}</span></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            container.innerHTML = html;
        }

        // Click outside modal to close
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            // ESC to close modals
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                closeSidebar();
            }
            
            // Enter on login form
            if (e.key === 'Enter' && currentPage === 'login') {
                const loginForm = document.getElementById('login-form');
                if (document.activeElement && loginForm.contains(document.activeElement)) {
                    handleLogin();
                }
            }
        });

        // Responsive sidebar handling
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeSidebar();
            }
        });

        // Demo data for testing
        function loadDemoData() {
            if (currentUser) {
                // Add some demo transactions
                transactions = [
                    {
                        id: 1,
                        type: 'deposit',
                        amount: 1000,
                        method: 'bank-transfer',
                        note: 'Initial deposit',
                        date: new Date(Date.now() - 86400000 * 5).toISOString(),
                        status: 'completed'
                    },
                    {
                        id: 2,
                        type: 'transfer',
                        amount: -250,
                        recipient: 'John Smith',
                        recipientAccount: '9876543210',
                        note: 'Rent payment',
                        date: new Date(Date.now() - 86400000 * 3).toISOString(),
                        status: 'completed'
                    },
                    {
                        id: 3,
                        type: 'deposit',
                        amount: 500,
                        method: 'bitcoin',
                        note: 'Bitcoin deposit',
                        date: new Date(Date.now() - 86400000).toISOString(),
                        status: 'completed'
                    }
                ];

                // Update balance
                currentUser.balance = transactions.reduce((sum, t) => sum + t.amount, 0);
                
                // Add demo card
                cards = [{
                    id: 1,
                    type: 'debit',
                    number: '4532123456789012',
                    expiryDate: '12/28',
                    cvv: '123',
                    status: 'Active',
                    applicationDate: new Date().toISOString()
                }];

                saveUserData();
                updateUserInStorage();
                updateDashboard();
            }
        }

        // Add demo data button (for testing purposes)
        function addDemoDataButton() {
            if (currentPage === 'dashboard' && currentUser) {
                const container = document.querySelector('#dashboard-page .container');
                if (container && !document.getElementById('demo-button')) {
                    const demoButton = document.createElement('button');
                    demoButton.id = 'demo-button';
                    demoButton.className = 'btn btn-secondary';
                    demoButton.innerHTML = '<i class="fas fa-database"></i> Load Demo Data';
                    demoButton.onclick = loadDemoData;
                    demoButton.style.position = 'fixed';
                    demoButton.style.bottom = '20px';
                    demoButton.style.right = '20px';
                    demoButton.style.zIndex = '1000';
                    container.appendChild(demoButton);
                }
            }
        }

        // Phone number formatting
        document.addEventListener('input', function(e) {
            if (e.target.id === 'reg-phone') {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 6) {
                    value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
                } else if (value.length > 0) {
                    value = value.replace(/(\d{0,3})/, '($1');
                }
                e.target.value = value;
            }
        });

        // SSN formatting
        document.addEventListener('input', function(e) {
            if (e.target.id === 'reg-ssn') {
                let value = e.target.value.replace(/\D/g, '');
                e.target.value = value;
            }
        });

        // Real-time balance updates
        function updateTransactionVolume() {
            if (!currentUser || transactions.length === 0) return;
            
            const volume = transactions
                .filter(t => t.status === 'completed')
                .reduce((sum, t) => sum + Math.abs(t.amount), 0);
            
            document.getElementById('transaction-volume').textContent = `${volume.toLocaleString()}`;
        }

        // Initialize demo button after dashboard loads
        setInterval(() => {
            if (currentPage === 'dashboard' && currentUser) {
                addDemoDataButton();
                updateTransactionVolume();
            }
        }, 1000);

        // Form validation helpers
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^\(\d{3}\) \d{3}-\d{4}$/;
            return re.test(phone);
        }

        // Enhanced form validation
        document.addEventListener('blur', function(e) {
            if (e.target.type === 'email') {
                if (!validateEmail(e.target.value) && e.target.value) {
                    e.target.style.borderColor = 'var(--danger-red)';
                } else {
                    e.target.style.borderColor = '';
                }
            }
            
            if (e.target.id === 'reg-phone') {
                if (!validatePhone(e.target.value) && e.target.value) {
                    e.target.style.borderColor = 'var(--danger-red)';
                } else {
                    e.target.style.borderColor = '';
                }
            }
        });

        // Auto-save form data (except sensitive fields)
        const autoSaveFields = ['reg-firstname', 'reg-lastname', 'reg-email', 'reg-phone', 'reg-address'];
        autoSaveFields.forEach(fieldId => {
            const field = document.getElementById(fieldId);
            if (field) {
                field.addEventListener('input', function() {
                    localStorage.setItem('form_' + fieldId, this.value);
                });
                
                // Restore on page load
                const savedValue = localStorage.getItem('form_' + fieldId);
                if (savedValue) {
                    field.value = savedValue;
                }
            }
        });

        // Clear auto-saved data on successful registration
        function clearAutoSavedData() {
            autoSaveFields.forEach(fieldId => {
                localStorage.removeItem('form_' + fieldId);
            });
        }

        // Add to successful registration handler
        const originalHandleRegister = handleRegister;
        handleRegister = function() {
            const result = originalHandleRegister.apply(this, arguments);
            if (result !== false) {
                clearAutoSavedData();
            }
            return result;
        };

        // Error handling for file uploads
        document.addEventListener('change', function(e) {
            if (e.target.type === 'file') {
                const file = e.target.files[0];
                if (file) {
                    const maxSize = 10 * 1024 * 1024; // 10MB
                    if (file.size > maxSize) {
                        showAlert('File size must be less than 10MB', 'danger');
                        e.target.value = '';
                        return;
                    }
                    
                    const allowedTypes = {
                        'id-upload': ['image/jpeg', 'image/png', 'application/pdf'],
                        'selfie-upload': ['image/jpeg', 'image/png'],
                        'income-proof': ['image/jpeg', 'image/png', 'application/pdf'],
                        'tax-documents': ['image/jpeg', 'image/png', 'application/pdf'],
                        'ticket-attachments': ['image/jpeg', 'image/png', 'application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']
                    };
                    
                    const allowed = allowedTypes[e.target.id];
                    if (allowed && !allowed.includes(file.type)) {
                        showAlert('Invalid file type. Please check the allowed formats.', 'danger');
                        e.target.value = '';
                        return;
                    }
                    
                    // Update upload UI
                    const uploadArea = e.target.closest('.file-upload');
                    if (uploadArea) {
                        const p = uploadArea.querySelector('p');
                        if (p) {
                            p.textContent = `Selected: ${file.name}`;
                            p.style.color = 'var(--success-green)';
                        }
                    }
                }
            }
        });

        // Add loading states to forms
        function setFormLoading(formId, loading) {
            const form = document.getElementById(formId);
            const submitButton = form.querySelector('button[type="submit"]');
            
            if (loading) {
                submitButton.disabled = true;
                submitButton.innerHTML = '<span class="loading"></span> Processing...';
            } else {
                submitButton.disabled = false;
                // Restore original text - you might want to store this
                const originalText = submitButton.getAttribute('data-original-text') || 'Submit';
                submitButton.innerHTML = originalText;
            }
        }

        // Store original button text
        document.querySelectorAll('button[type="submit"]').forEach(btn => {
            btn.setAttribute('data-original-text', btn.innerHTML);
        });

        console.log('SecureBank application loaded successfully!');
        console.log('Features: Login/Register, Account Verification, Dashboard, Deposits, Transfers, Cards, Loans, Support');
    </script>
</body>
</html>