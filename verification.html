<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SecureBank - Account Verification</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="public/css/verification.css" />
  </head>
  <body>
    <!-- Account Verification Page -->
    <div class="container">
      <div class="card" style="max-width: 600px; margin: 50px auto">
        <div class="card-header">
          <h2 class="card-title">
            <i class="fas fa-shield-alt"></i> Account Verification
          </h2>
        </div>
        <div class="alert alert-info">
          <i class="fas fa-info-circle"></i>
          To comply with banking regulations, we need to verify your identity.
          Please upload the required documents.
        </div>
        <form id="verification-form">
          <div class="form-group">
            <label
              >Government-issued ID (Driver's License, Passport, etc.)</label
            >
            <div
              class="file-upload"
              onclick="document.getElementById('id-upload').click()"
            >
              <input type="file" id="id-upload" accept="image/*,.pdf" />
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Click to upload your ID document</p>
              <small>Supported formats: JPG, PNG, PDF (Max 10MB)</small>
            </div>
          </div>
          <div class="form-group">
            <label>Selfie Photo</label>
            <div
              class="file-upload"
              onclick="document.getElementById('selfie-upload').click()"
            >
              <input type="file" id="selfie-upload" accept="image/*" />
              <i class="fas fa-camera"></i>
              <p>Click to upload a selfie</p>
              <small>Clear photo of your face (JPG, PNG only)</small>
            </div>
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-primary btn-block">
              <i class="fas fa-check"></i> Submit Verification
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      // Initialize App
      document.addEventListener("DOMContentLoaded", function () {
        setupFormHandlers();
      });

      // Form Handlers
      function setupFormHandlers() {
        document
          .getElementById("verification-form")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            handleVerification();
          });

        document
          .getElementById("id-upload")
          .addEventListener("change", validateFile);
        document
          .getElementById("selfie-upload")
          .addEventListener("change", validateFile);
      }

      // UI Functions
      function handleVerification() {
        const idUpload = document.getElementById("id-upload").files[0];
        const selfieUpload = document.getElementById("selfie-upload").files[0];

        if (!idUpload) {
          showAlert("Please upload a government-issued ID", "danger");
          return;
        }

        if (!selfieUpload) {
          showAlert("Please upload a selfie", "danger");
          return;
        }

        showAlert("Verification submitted successfully!", "success");
        setTimeout(() => {
          window.location.href = "dashboard.html";
        }, 2000);
      }

      function validateFile(e) {
        const file = e.target.files[0];
        if (file) {
          const maxSize = 10 * 1024 * 1024; // 10MB
          if (file.size > maxSize) {
            showAlert("File size must be less than 10MB", "danger");
            e.target.value = "";
            return;
          }

          const allowedTypes = {
            "id-upload": ["image/jpeg", "image/png", "application/pdf"],
            "selfie-upload": ["image/jpeg", "image/png"],
          };

          const allowed = allowedTypes[e.target.id];
          if (!allowed.includes(file.type)) {
            showAlert(
              "Invalid file type. Please check the allowed formats.",
              "danger"
            );
            e.target.value = "";
            return;
          }

          const uploadArea = e.target.closest(".file-upload");
          const p = uploadArea.querySelector("p");
          if (p) {
            p.textContent = `Selected: ${file.name}`;
            p.style.color = "var(--success-green)";
          }
        }
      }

      // Utility Functions
      function showAlert(message, type) {
        const alertDiv = document.createElement("div");
        alertDiv.className = `alert alert-${type}`;
        alertDiv.innerHTML = `<i class="fas fa-${
          type === "success" ? "check" : type === "danger" ? "times" : "info"
        }-circle"></i> ${message}`;

        const container = document.querySelector(".container");
        if (container) {
          container.insertBefore(alertDiv, container.firstChild);
          setTimeout(() => {
            if (alertDiv.parentNode) {
              alertDiv.parentNode.removeChild(alertDiv);
            }
          }, 3000);
        }
      }
    </script>
  </body>
</html>
